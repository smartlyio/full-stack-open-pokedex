name: Fly appDeploy
on:
  push:
    branches:
      - master
env:
  FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
jobs:
  deploy:
      if: ${{ github.event_name == 'push' }}
      name: Deploy app
      runs-on: ubuntu-latest
      steps: 
        - uses: actions/checkout@v2
        - uses: superfly/flyctl-actions/setup-flyctl@master
        - run: flyctl deploy --remote-only
      
        - name: Bump version and push tag
        - uses: anothrNick/github-tag-action@1.36.0
        - env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}